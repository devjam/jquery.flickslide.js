/* jquery.flickslide.js v 1.1 Copyright (c) 2012 SHIFTBRAIN Inc. Licensed under the MIT license. https://github.com/devjam */
(function(){(function(e){var t;return t=e,t.fn.FlickSlide=function(n){var r,i;return r={imagearea:".imagearea",naviarea:".naviarea",navibtn:".navibtn",interval:300,duration:500,easing:"liner",width:0,"min-width":0,resize:!1},i=t.extend(!0,{},r,n),this.each(function(){var n,r,s,o,u,a=this;i.imagearea instanceof e.fn.init?this.imagearea=i.imagearea:this.imagearea=t(this).find(i.imagearea),i.naviarea instanceof e.fn.init?this.naviarea=i.naviarea:this.naviarea=t(this).find(i.naviarea),i.navibtn instanceof e.fn.init?n=i.navibtn:n=t(this).find(i.navibtn),this.btn_base=n.parent().html(),this.stage=this.imagearea.find(".slidecontent"),r=this.imagearea.size(),s=this.naviarea.size(),o=n.size();if(r!==1||s!==1||o<1){t.fn.FlickSlide.initSlide=function(){return!1};return}t.fn.FlickSlide.setImage=function(e){var n,r;a.Timer!=null&&clearInterval(a.Timer),a.naviarea.empty(),a.imagearea.empty(),a.imagearea.append('<ul class="slidecontent"></ul>'),a.stage=a.imagearea.find(".slidecontent"),r=e.length,n=0;while(n<r)a.stage.append('<li><img src="'+e[n]+'" ></li>'),n++;return t(a).FlickSlide.initSlide()},t.fn.FlickSlide.setImagesPosition=function(){var e,n,r,s,o,u;a.x!=null?u=a.x*-1:(a.x=0,u=-1),n=a.stage.find("li").size(),o=a.stage.find("li").width(),a.stage.width(a.areaWidth*n),a.stage.find("li").each(function(e,n){return t(n).width(a.areaWidth)}),r=Math.round(u/o),r>n-1&&(r=n-1),r<0&&(r=0),s=a.areaWidth*r;if(s!==u)return a.x=s*-1,a.stage.stop().queue([]),e=1,u>=0&&(e=i.duration),a.stage.animate({left:a.x},e,i.easing)},t.fn.FlickSlide.initSlide=function(){var e;t(a).FlickSlide.updateSize(),t(a).FlickSlide.setImagesPosition(),t(a).FlickSlide.setNavi(),t(a).FlickSlide.updateNavi(a.x),a.Timer!=null&&clearInterval(a.Timer);if(i.interval>0){e=a.stage.find("li").size();if(e>1)return a.waitTime=0,a.Timer=setInterval(function(){var n,r,s;if(!a.touched){a.waitTime++;if(a.waitTime>i.interval)return a.waitTime=0,s=a.stage.position().left,s*=-1,n=Math.round(s/a.areaWidth),e=a.naviarea.find("a > *").size(),r=(n+1)%e,s=r*a.areaWidth*-1,a.stage.animate({left:s},i.duration),t(a).FlickSlide.updateNavi(s),a.x=s}},10)}},t.fn.FlickSlide.resize=function(){return t(a).FlickSlide.updateSize(),t(a).FlickSlide.setImagesPosition(),t(a).FlickSlide.updateNavi(a.x)},t.fn.FlickSlide.updateSize=function(){var e;return i.width>0?e=i.width:e=a.imagearea.width(),e<i["min-width"]&&(e=i["min-width"]),a.areaWidth=e,a.areaHeight=a.imagearea.height()},t.fn.FlickSlide.setNavi=function(){var e,n,r,s;e=a.naviarea.find("a > *").size(),r=a.imagearea.find("li").size();if(r===1){a.naviarea.css("display","none");return}a.naviarea.css("display","block");if(e<r){n=e;while(n<r)a.naviarea.append(a.btn_base),n++}return typeof (s=a.naviarea).common=="function"&&s.common({duration:0}),a.naviarea.find("a > *").each(function(e,n){return e<r?t(n).css("display","block").click(function(n){var r;return a.waitTime=0,r=e*a.areaWidth*-1,a.stage.animate({left:r},i.duration,i.easing),t(a).FlickSlide.updateNavi(r),n.preventDefault(),n.stopPropagation()}):t(n).css("display","none")})},t.fn.FlickSlide.updateNavi=function(e){var n,r,s;return s=e*-1,r=Math.round(s/a.areaWidth),n=a.naviarea.find("a > *").size(),r>n-1&&(r=n-1),r<0&&(r=0),a.naviarea.find("a > *").each(function(e){return t(this).removeClass("active"),r!==e?t(this).trigger("mouseout"):(t(this).trigger("mouseover"),t(this).addClass("active"))}),a.options=i},u={cursor:"pointer",position:"relative",overflow:"hidden"},this.imagearea.css(u),this.isTouch="ontouchstart"in window,this.imagearea.bind({"touchstart mousedown":function(e){var t;return a.isTouch?(e.touches!=null?t=e.touches[0]:t=e.originalEvent.touches[0],a.pageX=t.pageX):a.pageX=e.pageX,a.startX=a.pageX,a.x=parseInt(a.stage.css("left")),a.touched=!0,a.waitTime=0,a.stage.stop().queue([]),e.preventDefault(),e.stopPropagation()},"touchmove mousemove":function(e){var n,r;if(!a.touched)return;return a.isTouch?(e.touches!=null?r=e.touches[0]:r=e.originalEvent.touches[0],n=r.pageX):n=e.pageX,a.x=a.x+n-a.pageX,a.pageX=n,a.stage.css("left",a.x),t(a).FlickSlide.updateNavi(a.x),e.preventDefault(),e.stopPropagation()},"touchend mouseup mouseout":function(e){var n,r,s,o,u,f,l,c;if(!a.touched)return;a.touched=!1;if(a.isTouch)try{e.touches!=null?l=e.touches[0]:l=e.originalEvent.touches[0],u=l.pageX}catch(e){u=a.pageX}else u=e.pageX;return c=a.x+u-a.pageX,a.pageX=u,a.startX<a.pageX?c+=a.areaWidth*.5:a.startX>a.pageX&&(c-=a.areaWidth*.5),s=Math.round(c*-1/a.areaWidth),r=a.naviarea.find("a > *").size(),s>r-1&&(s=r-1),s<0&&(s=0),a.x=a.areaWidth*s*-1,o=a.stage.css("left").replace("px",""),n=a.x-o,n<0&&(n*=-1),f=i.duration*(n/a.areaWidth),a.stage.animate({left:a.x},f,i.easing),t(a).FlickSlide.updateNavi(a.x),e.preventDefault(),e.stopPropagation()}});if(i.resize)return typeof Util!="undefined"&&Util!==null?Util.window.bindResize(t(this).FlickSlide.resize):t(window).bind("resize",t(this).FlickSlide.resize)})}})(jQuery)}).call(this);